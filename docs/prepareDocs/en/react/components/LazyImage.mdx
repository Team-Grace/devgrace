import { LazyImage } from '@devgrace/react';

# LazyImage

An image component that lazily loads an assigned image when exposed to a `Viewport`.

You can resize the image by entering `width`, `height` values and at the same time improve the `Layout Shift`.

The `fallback` prop allows you to show an alternate UI when loading.

The `duration` props allows you to give a `transition-duration(ms)` for a smooth effect after the image loads. (defaul: 0)

You can set the Intersection Observer Option (see `Note` below).

<br />

## Interface
```tsx
interface LazyImageProps extends React.ComponentProps<'img'> {
  src: string;
  duration?: number;
  fallback?: React.ReactNode;
  threshold?: number | number[];
  root?: Document | Element | null;
  rootMargin?: string;
}

const LazyImage: React.ForwardRefExoticComponent<Omit<LazyImageProps, "ref"> & React.RefAttributes<HTMLDivElement>>
```

## Usage
### Default
```tsx
import { LazyImage } from '@devgrace/react';
import img1 from '../assets/img1.png';
import img2 from '../assets/img2.png';

const Example = () => {
  return (
    <div>
      {/* ... */}
      <LazyImage width={400} height={400} src={img1} alt="img1" />
      {/* ... */}
      <LazyImage width={400} height={400} src={img2} alt="img2" />
      {/* ... */}
    </div>
  );
}; 
```

<br />

### Fallback
```tsx
import { LazyImage } from '@devgrace/react';
import img1 from '../assets/img1.png';

const Example = () => {
  const skeletonStyle = {
    width: '400px',
    height: '400px',
    backgroundColor: '#cdcbcb',
  }

  return (
    <div>
      <LazyImage
        fallback={<div style={skeletonStyle} />} // Fallback UI
        duration={500} // .5s opacity transition-duration(ms)
        width={400}
        height={400}
        src={img1}
        alt="img1"
      />
    </div>
  );
}; 
```

## Example

<div style={{ maxWidth: '500px', height: '500px', overflow:'scroll', background: '#f8f8f8' }}>
  <div style={{ width: '100%', height: '500px',  textAlign: 'center', fontSize: '2rem' }}>
    Please scroll down.
  </div>
  <LazyImage
    width={"100%"}
    height={400}
    duration={300}
    src={
      'https://github.com/Team-Grace/devgrace/assets/64779472/b5640bec-2abc-4205-afbf-ccfd9876a90b'
    }
    alt="img1"
    onClick={() => console.log('img click1')}
  />

  <div style={{ width: '100%', height: '150px' }} />

  <div style={{ display: 'flex', gap: '8px'}}>
    <LazyImage
      fallback={<div style={{ width: '100%', height: '400px', background: '#34e09b'}}>Skeleton1</div>}
      width={"100%"}
      height={250}
      duration={300}
      src={
        'https://github.com/Team-Grace/devgrace/assets/64779472/207743a7-b29f-4826-bc08-8df0d67e568b'
      }
      alt="img2"
      onClick={() => console.log('img click2')}
    />
    <LazyImage
      fallback={<div style={{ width: '100%', height: '400px', background: '#3cbce7'}}>Skeleton2</div>}
      width={"100%"}
      height={250}
      duration={300}
      src={
        'https://github.com/Team-Grace/devgrace/assets/64779472/7c2a8cf4-989d-425f-80a8-1f6e1620e56b'
      }
      alt="img3"
      onClick={() => console.log('img click3')}
    />
  </div>

  <div style={{ width: '100%', height: '150px' }} />

  <LazyImage
    fallback={<div style={{ width: '100%', height: '400px', background: '#E79E90'}}>Skeleton3</div>}
    width={"100%"}
    height={400}
    duration={300}
    src={
      'https://github.com/Team-Grace/devgrace/assets/64779472/d1957ec8-fe87-406e-bfda-fb4ee505b152'
    }
    alt="img1"
    onClick={() => console.log('img click4')}
  />
</div>

## Note
[Intersection Observer API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)